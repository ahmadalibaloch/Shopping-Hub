<?php	include('php/includes.php');	$hdata['title'] = 'Add Category';	$hdata['page'] = 'categories';	$message = '';	if($_POST)	{		$id = array_value($_POST,'id');		trace($id);		$name = $_POST['name'];		$descr = $_POST['descr'];				if(!trim($name)){			echo 'Please enter a category name';			exit;		}		$c = new Category();		if($image = array_value($_FILES,'image'))		{			if($image['error']==0 && preg_match('/image/',$image['type']))			{				if(move_uploaded_file($image['tmp_name'],APP_ROOT.'images/categories/'.$image['name']))				{					$c->setImage($image['name']);				}				else				$message = 'image not uploaded successfully';			}			else if($image['error']==2 || $image['error']==3) 			{				$message = 'image size is too large, limit is 2MB.';			}		}		$c->setId($id);		$c->setName($name);		$c->setDescr($descr);				if($c->save()){			$message = 'Category added successfully';		}		else {			$message = 'Category adding failed';		}	}		$append = 'false ';		if($editId = array_value($_GET,'edit'))	{		$append = "id = $editId";	}	print_header($hdata);	$vdata['categories'] = Category::getAll($append);	$vdata['message'] = $message;	print_view('addCategory', $vdata);	print_footer();